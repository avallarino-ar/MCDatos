---
title: "R - PCA"
output:
  html_document: default
---

### Analisis de componentes principales
##### Ariel Vallarino

```{r}
inegi <- read.csv("inegi.csv")  # Importo datos
```

### Limpieza de datos:
Es importante limpiar bien los datos y asegurarse de que esten en unidades equivalentes o que se puedan comparar 
```{r}
# Recorro columnas de interes y las divido por la Poblacion
for (col in c("Divorcios", "DefuncionesGenerales", "Nacimientos", "Divorcios", "Matrimonios")) {
  inegi[ ,col] <- inegi[ ,col] / inegi[ ,"Poblacion"]
}
head(inegi)
```


##### Eliminar datos innecesarios.
como por ej: Estado y Poblacion (las 2 primeras columnas)
```{r}
x <- inegi[ ,-(1:2)]
row.names(x) <- inegi$Estado
```

Importo libería:
```{r}
# install.packages("FactoMineR")
library("FactoMineR")
```

### PCA
Maximizar la varianza de una cobinacion lineal sujeto a una norma  
Por defecto PCA trae seteado el parametro SCALE.UNIT = TRUE para normalizar las variables
```{r}
# Calculo PCA y muestro resultado
model <- PCA(x, graph = FALSE)
print(model)
```


##### Grafico de PCA para las Variables:
```{r}
plot(model, choix = "var",col.var="steelblue")
```

##### Grafico de PCA para los resultados individuales
```{r}
plot(model, choix = "ind")
```

##### Eigenvalores:
```{r}
eigenvalores <- model$eig
head(eigenvalores[, 1:2])
```

##### Grafico valores
```{r}
barplot(eigenvalores[, 2], names.arg=1:nrow(eigenvalores), 
       main = "Variances",
       xlab = "Principal Components",
       ylab = "Percentage of variances",
       col ="steelblue")
# Dibulo linea
lines(x = 1:nrow(eigenvalores), eigenvalores[, 2], 
      type="b", pch=19, col = "red")
```

##### Aproximadamente el 60% de la informacion esta contenida en los primeros 2 componentes principales.


